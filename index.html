<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>æ±äº¬è¶Šå¾Œæ¹¯æ¾¤è¡Œç¨‹</title>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://unpkg.com/framer-motion@10.16.4/dist/framer-motion.js"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
        body { background-color: #0f172a; margin: 0; overscroll-behavior-y: contain; text-align: left; }
        * { -webkit-tap-highlight-color: transparent; }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useMemo, useEffect } = React;
        const { motion, AnimatePresence } = FramerMotion;
        
        // å–å¾—åœ–ç¤º
        const { 
            Plane, ShoppingBag, Snowflake, Star, Train, CheckCircle2, Circle, 
            Calendar, ChevronRight, X, Info, Navigation, Trash2, CloudSnow, 
            CloudSun, ExternalLink, MapPin, Hotel, ShieldAlert, AlertTriangle, MessageCircle, ShoppingCart 
        } = lucide;

        // è¡Œç¨‹è³‡æ–™
        const itineraryData = [
            { 
                day: "Day 1", date: "2/1", title: "å•Ÿç¨‹èˆ‡æ·±å¤œæ±äº¬", icon: <Plane />, category: ["transport"],
                color: "from-blue-600 to-indigo-700",
                bgUrl: "https://images.unsplash.com/photo-1542259009477-d625c009b5d7?q=80&w=2070&auto=format&fit=crop", 
                detail: "èˆªç­ MM860 | æŠµé”ç¾½ç”° | åŒ…è»Šæ¥é€", 
                mapQuery: "Ostay Ueno Tokyo",
                flightInfo: { no: "Peach MM860", route: "TPE âœˆï¸ HND", terminal: "æ¡ƒåœ’ T1 / ç¾½ç”° T3" },
                extendedDetail: [
                    { time: "20:55", task: "èˆªç­èµ·é£›å‰å¾€ç¾½ç”°" },
                    { time: "00:50", task: "æŠµé”ç¾½ç”°æ©Ÿå ´ T3" },
                    { time: "02:15", task: "æŠµé” Ostay Ueno å…¥ä½" }
                ],
                memo: "å…¬å¯“ä¸‹æœ‰ 24H è¶…å¸‚ï¼Œå¯è³¼è²·æ·±å¤œç¾é£Ÿã€‚"
            },
            { 
                day: "Day 2", date: "2/2", title: "é›ªå…·å°ˆé …ï¼šåŸå¸‚è³¼ç‰©", icon: <ShoppingBag />, category: ["shopping"],
                color: "from-purple-500 to-pink-500",
                bgUrl: "https://images.unsplash.com/photo-1503899036084-c55cdd92da26?q=80&w=2070&auto=format&fit=crop", 
                detail: "ç¥ç”°é›ªå…·è¡— | æ¼«æ­¥ä¸Šé‡", 
                mapQuery: "ç¥ç”°å°å·ç”ºé›ªå…·è¡—",
                extendedDetail: [
                    { time: "11:00", task: "èµ·åºŠè£œçœ  & æ—©åˆé¤" },
                    { time: "13:00", task: "ç¥ç”°å°å·ç”ºé›ªå…·è¡—æ¡è²·" },
                    { time: "16:00", task: "ä¸Šé‡é˜¿ç¾æ©«ä¸è³¼ç‰©" }
                ],
                memo: "Suica ç¶å®š Apple Wallet æ‰‹æ©Ÿé€²å‡ºæ›´æ–¹ä¾¿ã€‚"
            },
            { 
                day: "Day 3", date: "2/3", title: "å¤¢å¹»è¿ªå£«å°¼æµ·æ´‹", icon: <Star />, category: ["attraction"],
                color: "from-amber-400 to-orange-500",
                bgUrl: "https://images.unsplash.com/photo-1594916309831-294025b42d76?q=80&w=2070&auto=format&fit=crop", 
                detail: "DisneySea æ”»ç•¥ | DPA æ¶åˆ¸", 
                mapQuery: "Tokyo DisneySea",
                extendedDetail: [
                    { time: "07:30", task: "åäººåº§åŒ…è»Šé£¯åº—é–€å£é›†åˆ" },
                    { time: "08:30", task: "APP æ¶é ˜ DPA é ç´„" },
                    { time: "20:00", task: "è¿”å›ä¸Šé‡å…¬å¯“" }
                ],
                memo: "å¿…æ¶é …ç›®ï¼šå¤¢å¹»æ³‰é„‰ã€‚åŒ…è»Šè²»ç”¨ç¾å ´ä»˜ç¾ã€‚"
            },
            { 
                day: "Day 4", date: "2/4", title: "é›ªåœ‹æ–°å¹¹ç·š (åŠæ»‘)", icon: <Train />, category: ["transport", "ski"], 
                color: "from-cyan-500 to-blue-400",
                bgUrl: "https://images.unsplash.com/photo-1490806678282-4aa49b88f200?q=80&w=2070&auto=format&fit=crop", 
                detail: "æ–°å¹¹ç·šå‰å¾€è¶Šå¾Œæ¹¯æ¾¤ | æ»‘é›ª", 
                mapQuery: "Kandatsu Kogen Ski Resort",
                extendedDetail: [
                    { time: "09:00", task: "å‰å¾€ä¸Šé‡ç«™æ­ä¹˜æ–°å¹¹ç·š" },
                    { time: "11:00", task: "æŠµé”æ¹¯æ¾¤ï¼Œç‡’è‚‰åˆé¤" },
                    { time: "14:30", task: "ç¥ç«‹é«˜åŸæ»‘é›ªå ´åŠæ—¥" }
                ],
                memo: "å¤§å‹è¡Œæè¨˜å¾—æ”¾ç½®æ–¼è»Šå»‚å¾Œæ–¹è¡Œæå€ã€‚"
            },
            { 
                day: "Day 5", date: "2/5", title: "ç²‰é›ªå…¨æ—¥æ»‘èµ°", icon: <Snowflake />, category: ["ski"],
                color: "from-blue-200 to-indigo-300",
                bgUrl: "https://images.unsplash.com/photo-1549110485-64d852079093?q=80&w=2070&auto=format&fit=crop", 
                detail: "ç¥ç«‹é«˜åŸå…¨æ—¥ | æº«æ³‰æ”¾é¬†", 
                mapQuery: "Kandatsu Kogen Ski Resort",
                extendedDetail: [
                    { time: "09:00", task: "å…¨æ—¥æ»‘é›ªè¨“ç·´é–‹å§‹" },
                    { time: "12:00", task: "é›ªå ´é¤å»³æ™¯è§€åˆé¤" },
                    { time: "16:00", task: "ç¥ä¹‹æ¹¯æº«æ³‰æ”¾é¬†" }
                ],
                memo: "ç¥ç«‹å¹³æ—¥å¥³æ€§åŠåƒ¹ï¼Œå»ºè­°ç¢ºèªå®˜ç¶²æœ€æ–°è³‡è¨Šã€‚"
            },
            { 
                day: "Day 6", date: "2/6", title: "æ­¸é€”ï¼šè¿”å°è¡Œç¨‹", icon: <Plane />, category: ["transport"],
                color: "from-gray-600 to-gray-800",
                bgUrl: "https://images.unsplash.com/photo-1496231447448-f541f0b02f82?q=80&w=2070&auto=format&fit=crop", 
                detail: "æ–°å¹¹ç·šè¿”äº¬ | èˆªç­ SL395", 
                mapQuery: "Narita Airport Terminal 1",
                flightInfo: { no: "Thai Lion SL395", route: "NRT âœˆï¸ TPE", terminal: "æˆç”° T1N" },
                extendedDetail: [
                    { time: "10:00", task: "æ¹¯æ¾¤è»Šç«™æœ€å¾Œæ¡è²·ä¼´æ‰‹ç¦®" },
                    { time: "14:45", task: "æŠµé”æˆç”°æ©Ÿå ´ T1N" },
                    { time: "17:15", task: "èˆªç­èµ·é£›è¿”å°" }
                ],
                memo: "æ¹¯æ¾¤ç«™å…§æ¨è–¦è³¼è²·æ–°æ½Ÿç±³èˆ‡æ¸…é…’ä½œç‚ºä¼´æ‰‹ç¦®ã€‚"
            }
        ];

        const initialPackingList = {
            "ğŸ“‹ è¡Œå‰ä½œæ¥­": ["æ©Ÿç¥¨/é£¯åº—", "æ—…éŠä¿éšª", "Esim", "VJW"],
            "ğŸ” éš¨èº«è­‰ä»¶": ["è­·ç…§", "èº«åˆ†è­‰", "ä¿¡ç”¨å¡", "æ—¥å¹£ç¾é‡‘"],
            "â„ï¸ æ»‘é›ªè£å‚™": ["é›ªè¡£/é›ªè¤²", "å†°çˆª", "é¢é¡", "è­·å…·", "æ»‘é›ªè¥ª", "æ‰‹å¥—"],
            "ğŸ” é›»å™¨ç›¸é—œ": ["è¡Œå‹•é›»æº", "è¬åœ‹æ’é ­", "å……é›»ç·š", "ç›¸æ©Ÿ"]
        };

        const App = () => {
            const [activeTab, setActiveTab] = useState('itinerary');
            const [checkedItems, setCheckedItems] = useState({});
            const [selectedDay, setSelectedDay] = useState(null);
            const [filter, setFilter] = useState('all');
            const [countdown, setCountdown] = useState("");
            const [currentBg, setCurrentBg] = useState(itineraryData[0].bgUrl);

            useEffect(() => {
                const target = new Date("2026-02-01T20:55:00").getTime();
                const interval = setInterval(() => {
                    const now = new Date().getTime();
                    const diff = target - now;
                    if (diff < 0) {
                        setCountdown("å·²å•Ÿç¨‹ âœˆï¸");
                        clearInterval(interval);
                    } else {
                        const d = Math.floor(diff / (1000 * 60 * 60 * 24));
                        const h = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                        setCountdown(`${d}å¤© ${h}æ™‚`);
                    }
                }, 1000);
                return () => clearInterval(interval);
            }, []);

            const filteredItinerary = useMemo(() => {
                if (filter === 'all') return itineraryData;
                return itineraryData.filter(item => item.category.includes(filter));
            }, [filter]);

            return (
                <div className="min-h-screen text-white overflow-x-hidden text-left pb-24">
                    <div className="fixed inset-0 z-0">
                        <AnimatePresence mode='wait'>
                            <motion.img
                                key={currentBg}
                                initial={{ opacity: 0 }}
                                animate={{ opacity: 0.3 }}
                                exit={{ opacity: 0 }}
                                transition={{ duration: 1 }}
                                src={currentBg}
                                className="w-full h-full object-cover"
                            />
                        </AnimatePresence>
                        <div className="absolute inset-0 bg-gradient-to-b from-slate-900/20 via-slate-900/60 to-slate-900 z-10" />
                    </div>

                    <header className="relative z-30 px-6 pt-12 pb-6">
                        <div className="flex justify-end mb-4">
                            <button onClick={() => window.open('https://www.data.jma.go.jp/multi/yoho/yoho_detail.html?code=130010&lang=cn_zt')} className="bg-white/10 backdrop-blur-md border border-white/20 rounded-xl px-4 py-2 flex items-center gap-2 text-xs">
                                <CloudSun size={16} className="text-cyan-400" /> æ±äº¬å¤©æ°£
                            </button>
                        </div>
                        <motion.div initial={{ opacity: 0, y: 10 }} animate={{ opacity: 1, y: 0 }}>
                            <span className="text-cyan-400 font-bold tracking-widest text-[10px] uppercase">{countdown} TO GO</span>
                            <h1 className="text-3xl font-black mt-1 text-left">æ±äº¬ & è¶Šå¾Œæ¹¯æ¾¤</h1>
                        </motion.div>
                    </header>

                    <nav className="sticky top-4 z-50 px-4 mb-8">
                        <div className="bg-slate-900/80 backdrop-blur-xl p-1 rounded-full border border-white/10 flex overflow-x-auto no-scrollbar">
                            {['itinerary', 'packing', 'info'].map((tab) => (
                                <button key={tab} onClick={() => setActiveTab(tab)} className={`flex-1 min-w-[80px] py-3 rounded-full text-[10px] font-bold uppercase transition-all relative ${activeTab === tab ? 'text-white' : 'text-slate-500'}`}>
                                    {activeTab === tab && <motion.div layoutId="tab" className="absolute inset-0 bg-cyan-600 rounded-full z-0" />}
                                    <span className="relative z-10">{tab === 'itinerary' ? 'è¡Œç¨‹' : tab === 'packing' ? 'è¡Œæ' : 'è³‡è¨Š'}</span>
                                </button>
                            ))}
                        </div>
                    </nav>

                    <main className="relative z-30 px-6 max-w-md mx-auto">
                        <AnimatePresence mode="wait">
                            {activeTab === 'itinerary' && (
                                <motion.div key="itinerary" initial={{ opacity: 0 }} animate={{ opacity: 1 }} exit={{ opacity: 0 }} className="space-y-4">
                                    {filteredItinerary.map((item) => (
                                        <div key={item.day} onClick={() => {setSelectedDay(item); setCurrentBg(item.bgUrl)}} className="bg-white rounded-2xl p-4 flex items-center gap-4 shadow-lg cursor-pointer">
                                            <div className={`w-12 h-12 rounded-xl bg-gradient-to-br ${item.color} flex items-center justify-center text-white`}>
                                                {item.icon}
                                            </div>
                                            <div className="flex-1">
                                                <div className="text-[10px] font-bold text-blue-600 uppercase text-left">{item.day} Â· {item.date}</div>
                                                <div className="text-slate-900 font-bold text-left">{item.title}</div>
                                                <div className="text-slate-400 text-xs truncate text-left">{item.detail}</div>
                                            </div>
                                            <ChevronRight size={16} className="text-slate-300" />
                                        </div>
                                    ))}
                                </motion.div>
                            )}

                            {activeTab === 'packing' && (
                                <motion.div key="packing" initial={{ opacity: 0 }} animate={{ opacity: 1 }} exit={{ opacity: 0 }} className="space-y-6">
                                    {Object.entries(initialPackingList).map(([category, items]) => (
                                        <div key={category} className="bg-slate-800/50 backdrop-blur-md rounded-2xl p-5 border border-white/5">
                                            <h3 className="text-cyan-400 text-xs font-bold mb-4 text-left">{category}</h3>
                                            <div className="space-y-3 text-left">
                                                {items.map(item => (
                                                    <div key={item} onClick={() => setCheckedItems(prev => ({...prev, [item]: !prev[item]}))} className="flex items-center gap-3">
                                                        {checkedItems[item] ? <CheckCircle2 size={18} className="text-emerald-500" /> : <Circle size={18} className="text-slate-600" />}
                                                        <span className={`text-sm ${checkedItems[item] ? 'line-through text-slate-500' : 'text-slate-200'}`}>{item}</span>
                                                    </div>
                                                ))}
                                            </div>
                                        </div>
                                    ))}
                                </motion.div>
                            )}
                        </AnimatePresence>
                    </main>

                    <AnimatePresence>
                        {selectedDay && (
                            <div className="fixed inset-0 z-[100] flex items-end">
                                <motion.div initial={{ opacity: 0 }} animate={{ opacity: 1 }} exit={{ opacity: 0 }} onClick={() => setSelectedDay(null)} className="absolute inset-0 bg-black/80" />
                                <motion.div initial={{ y: "100%" }} animate={{ y: 0 }} exit={{ y: "100%" }} className="relative w-full bg-white rounded-t-3xl p-6 text-slate-900 max-h-[85vh] overflow-y-auto text-left">
                                    <div className="w-10 h-1 bg-slate-200 rounded-full mx-auto mb-6" />
                                    <div className="flex justify-between items-center mb-6">
                                        <div className="text-left">
                                            <div className="text-xs font-bold text-blue-600 text-left">{selectedDay.day} Â· {selectedDay.date}</div>
                                            <h2 className="text-2xl font-black text-left">{selectedDay.title}</h2>
                                        </div>
                                        <button onClick={() => setSelectedDay(null)} className="p-2 bg-slate-100 rounded-full"><X size={20} /></button>
                                    </div>
                                    <div className="space-y-6 text-left">
                                        {selectedDay.extendedDetail.map((step, i) => (
                                            <div key={i} className="flex gap-4">
                                                <div className="text-cyan-600 font-bold text-xs pt-1 w-12 text-left">{step.time}</div>
                                                <div className="flex-1 text-slate-800 font-bold text-left">{step.task}</div>
                                            </div>
                                        ))}
                                    </div>
                                    <div className="mt-8 p-4 bg-slate-50 rounded-xl border border-slate-100 italic text-sm text-slate-500 text-left">
                                        {selectedDay.memo}
                                    </div>
                                    <button onClick={() => window.open(`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(selectedDay.mapQuery)}`)} className="w-full bg-slate-900 text-white py-4 rounded-xl font-bold mt-8 flex items-center justify-center gap-2">
                                        <MapPin size={18} /> æŸ¥çœ‹ Google åœ°åœ–
                                    </button>
                                </motion.div>
                            </div>
                        )}
                    </AnimatePresence>

                    <div className="fixed bottom-6 left-1/2 -translate-x-1/2 w-full max-w-[280px] z-50">
                        <div className="bg-slate-900/90 backdrop-blur-2xl rounded-full p-2 flex justify-around items-center shadow-2xl border border-white/10 h-14">
                            <button onClick={() => setFilter('transport')} className={`p-2 rounded-full ${filter === 'transport' ? 'text-cyan-400' : 'text-slate-600'}`}><Plane size={20} /></button>
                            <button onClick={() => {setFilter('all'); setCurrentBg(itineraryData[0].bgUrl)}} className="w-12 h-12 bg-cyan-600 rounded-full flex items-center justify-center text-white"><Snowflake size={24} /></button>
                            <button onClick={() => setFilter('ski')} className={`p-2 rounded-full ${filter === 'ski' ? 'text-blue-400' : 'text-slate-600'}`}><CloudSnow size={20} /></button>
                        </div>
                    </div>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
